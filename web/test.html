<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <title>KnowWhere Search Playground</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.5/pagination.css">
  <link rel="stylesheet" href="css/style.css" media="all">
</head>
<body>
<script>
  // Load sidebar and GitHub corner components from `components/` and insert into the page.
  document.addEventListener('DOMContentLoaded', async function () {
    try {
      const [sidebarRes, cornerRes, faviconRes] = await Promise.all([
        fetch('components/sidebar.html'),
        fetch('components/github-corner.html'),
        fetch('components/favicon.html')
      ]);

      if (sidebarRes && sidebarRes.ok) {
        const sidebarText = await sidebarRes.text();
        const wrapper = document.createElement('div');
        wrapper.innerHTML = sidebarText;
        const node = wrapper.firstElementChild;
        if (node) document.body.insertBefore(node, document.body.firstChild);
      }

      // Adjust sidebar links: point to index anchors when on other pages
      if (sidebarRes && sidebarRes.ok) {
        try {
          const inserted = document.querySelector('.left-menu');
          if (inserted) {
            const items = inserted.querySelectorAll('.scroll-to-link');
            items.forEach(li => {
              const target = li.getAttribute('data-target');
              const a = li.querySelector('a');
              if (!a || !target) return;
              // On pages other than api.html, point to `api.html#target`
              const isApiPage = location.pathname.endsWith('api.html');
              a.setAttribute('href', isApiPage ? ('#' + target) : ('api.html#' + target));
            });
          }
        } catch (e) {
          // non-fatal
        }
      }

      if (cornerRes && cornerRes.ok) {
        const cornerText = await cornerRes.text();
        const wrapper2 = document.createElement('div');
        wrapper2.innerHTML = cornerText;
        const node2 = wrapper2.firstElementChild;
        if (node2) document.body.appendChild(node2);
      }

      if (faviconRes && faviconRes.ok) {
        const favText = await faviconRes.text();
        const headWrapper = document.createElement('div');
        headWrapper.innerHTML = favText;
        Array.from(headWrapper.children).forEach(ch => document.head.appendChild(ch));
      }

      // Notify any scripts that components were loaded
      document.dispatchEvent(new Event('componentsLoaded'));
    } catch (e) {
      console.error('Failed to load components:', e);
    }
  });
</script>
<div class="content-page">
  <div class="content-code"></div>
  <div class="content">
    <div class="overflow-hidden content-section" id="content-playground">
      <h1 class="text-center">Search papers</h1>
      <input id="api-base" type="hidden" value="http://localhost:3000">
      <input id="api-key" type="hidden" value="">
      <div class="card search-card" style="max-width: 880px; margin: 0 auto;">
        <div class="card__content">
          <div class="search-row">
            <input id="query" type="text" class="search-input" placeholder="Search for papers..." value="graph neural networks">
            <div class="search-actions">
              <button id="search-btn" class="btn btn-primary">Search</button>
              <button id="toggle-filters" class="btn btn-ghost">Filters</button>
            </div>
          </div>
          <div id="filters-panel" class="filters-panel hidden">
            <div class="form-inline single-line row-filters">
              <div class="form-group">
                <label>Year from</label>
                <input id="year-from" type="number" placeholder="e.g. 2020">
              </div>
              <div class="form-group">
                <label>Year to</label>
                <input id="year-to" type="number" placeholder="e.g. 2024">
              </div>
              <div class="form-group">
                <label>Subject</label>
                <input id="subject" type="text" placeholder="cs.LG">
              </div>
              <div class="form-group">
                <label>Source</label>
                <input id="source" type="text" placeholder="arxiv">
              </div>
            </div>
          </div>
          <div class="form-actions">
            <span id="status" class="status"></span>
          </div>
        </div>
      </div>
    </div>

    <div class="overflow-hidden content-section">
      <div class="results-header">
        <div id="pagination-top" class="pagination-top"></div>
      </div>
      <div id="results-summary" class="text-muted small" style="display:none;"></div>
      <div id="results-list" class="results-grid"></div>
      <div id="pagination" class="pagination-bottom"></div>
    </div>
  </div>
  <div class="content-code"></div>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.5/pagination.min.js"></script>
<script src="js/test.js"></script>
</body>
</html>
